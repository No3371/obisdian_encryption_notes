# Key Derivation Function
- Is Hashing
- Used to derive new keys from secret value or secret+salt
- Used to stretch or convert keys

A **key derivation function** (**KDF**) is a [cryptographic hash function](https://en.wikipedia.org/wiki/Cryptographic_hash_function) that derives one or more [secret keys](https://en.wikipedia.org/wiki/Key_(cryptography) "Key (cryptography)") from a secret value such as a main key, a [password](https://en.wikipedia.org/wiki/Password "Password"), or a [passphrase](https://en.wikipedia.org/wiki/Passphrase "Passphrase") using a [pseudorandom function](https://en.wikipedia.org/wiki/Pseudorandom_function "Pseudorandom function").[\[1\]](https://en.wikipedia.org/wiki/Key_derivation_function#cite_note-1)[\[2\]](https://en.wikipedia.org/wiki/Key_derivation_function#cite_note-2)

KDFs can be used to stretch keys into longer keys or to obtain keys of a required format, such as converting a group element that is the result of a [Diffie–Hellman key exchange](https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange "Diffie–Hellman key exchange") into a symmetric key for use with [AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard "Advanced Encryption Standard"). [Keyed cryptographic hash functions](https://en.wikipedia.org/wiki/HMAC "HMAC") are popular examples of pseudorandom functions used for key derivation.[\[3\]](https://en.wikipedia.org/wiki/Key_derivation_function#cite_note-3)

## Uses of KDFs
-   In conjunction with non-secret parameters to derive one or more keys from a common secret value (which is sometimes also referred to as "key diversification"). Such use may prevent an attacker who obtains a derived key from learning useful information about either the input secret value or any of the other derived keys. A KDF may also be used to ensure that derived keys have other desirable properties, such as avoiding "weak keys" in some specific encryption systems.
-   The most common\[_[citation needed](https://en.wikipedia.org/wiki/Wikipedia:Citation_needed "Wikipedia:Citation needed")_\] use of KDFs is the **password hashing** approach to [password verification](https://en.wikipedia.org/wiki/Cryptographic_hash_function#Password_verification "Cryptographic hash function"), as used by the [passwd](https://en.wikipedia.org/wiki/Passwd "Passwd") file or [shadow password](https://en.wikipedia.org/wiki/Shadow_password "Shadow password") file. KDFs happen to have the characteristics desired for a "password hash function", even though they were not originally designed for this purpose.\[_[citation needed](https://en.wikipedia.org/wiki/Wikipedia:Citation_needed "Wikipedia:Citation needed")_\] The non-secret parameters are called "[salt](https://en.wikipedia.org/wiki/Salt_(cryptography) "Salt (cryptography)")" in this context.
	In 2013 a [Password Hashing Competition](https://en.wikipedia.org/wiki/Password_Hashing_Competition "Password Hashing Competition") was announced to choose a new, standard algorithm for password hashing. On 20 July 2015 the competition ended and [Argon2](https://en.wikipedia.org/wiki/Argon2 "Argon2") was announced as the final winner. Four other algorithms received special recognition: Catena, Lyra2, Makwa and yescrypt.[\[4\]](https://en.wikipedia.org/wiki/Key_derivation_function#cite_note-4)

-   As components of multiparty [key-agreement protocols](https://en.wikipedia.org/wiki/Key-agreement_protocol "Key-agreement protocol"). Examples of such key derivation functions include [KDF1](https://en.wikipedia.org/w/index.php?title=KDF1&action=edit&redlink=1 "KDF1 (page does not exist)"), defined in [IEEE Std 1363-2000](https://en.wikipedia.org/wiki/IEEE_P1363 "IEEE P1363"), and similar functions in [ANSI X9.42](https://en.wikipedia.org/w/index.php?title=ANSI_X9.42&action=edit&redlink=1 "ANSI X9.42 (page does not exist)").
-   To derive keys from secret passwords or passphrases.
-   To derive keys of different length from the ones provided: one example of KDFs designed for this purpose is [HKDF](https://en.wikipedia.org/wiki/HKDF "HKDF").
-   [Key stretching](https://en.wikipedia.org/wiki/Key_stretching "Key stretching") and key strengthening.

### Key stretching and key strengthening

Main article: [Key stretching](https://en.wikipedia.org/wiki/Key_stretching "Key stretching")

Key derivation functions are also used in applications to derive keys from secret passwords or passphrases, which typically do not have the desired properties to be used directly as cryptographic keys. In such applications, it is generally recommended that the key derivation function be made deliberately slow so as to frustrate [brute-force attack](https://en.wikipedia.org/wiki/Brute-force_attack "Brute-force attack") or [dictionary attack](https://en.wikipedia.org/wiki/Dictionary_attack "Dictionary attack") on the password or passphrase input value.

Such use may be expressed as *DK = KDF(key, salt, iterations)*, where DK is the derived key, KDF is the key derivation [function](https://en.wikipedia.org/wiki/Subroutine "Subroutine"), key is the original key or password, salt is a random number which acts as [cryptographic salt](https://en.wikipedia.org/wiki/Salt_(cryptography) "Salt (cryptography)"), and iterations refers to the number of [iterations](https://en.wikipedia.org/wiki/Iteration "Iteration") of a sub-function. The derived key is used instead of the original key or password as the key to the system. The values of the salt and the number of iterations (if it is not fixed) are stored with the hashed password or sent as [cleartext](https://en.wikipedia.org/wiki/Plaintext "Plaintext") (unencrypted) with an encrypted message.[\[5\]](https://en.wikipedia.org/wiki/Key_derivation_function#cite_note-salthash-5)

The difficulty of a brute force attack is increased with the number of iterations. A practical limit on the iteration count is the unwillingness of users to tolerate a perceptible delay in logging into a computer or seeing a decrypted message. The use of [salt](https://en.wikipedia.org/wiki/Salt_(cryptography) "Salt (cryptography)") prevents the attackers from precomputing a dictionary of derived keys.[\[5\]](https://en.wikipedia.org/wiki/Key_derivation_function#cite_note-salthash-5)

An alternative approach, called **key strengthening**, extends the key with a random salt, but then (unlike in key stretching) securely deletes the salt.[\[6\]](https://en.wikipedia.org/wiki/Key_derivation_function#cite_note-6) This forces both the attacker and legitimate users to perform a brute-force search for the salt value.[\[7\]](https://en.wikipedia.org/wiki/Key_derivation_function#cite_note-7) Although the paper that introduced key stretching[\[8\]](https://en.wikipedia.org/wiki/Key_derivation_function#cite_note-low-entropy-8) referred to this earlier technique and intentionally chose a different name, the term "key strengthening" is now often (arguably incorrectly) used to refer to key stretching.

---
> https://en.wikipedia.org/wiki/Key_derivation_function